#!/bin/bash

echo "============================================================="
echo "АВАРИЙНОЕ ВОССТАНОВЛЕНИЕ СТРУКТУРЫ БАЗЫ ДАННЫХ"
echo "============================================================="
echo "Этот скрипт восстановит только структуру таблиц."
echo "Данные, которые были утеряны, НЕ будут восстановлены!"
echo 
echo "Скрипт выполнит следующие действия:"
echo "1. Создаст недостающие enum-типы"
echo "2. Создаст отсутствующие таблицы"
echo "3. Добавит все необходимые индексы"
echo
echo "ВАЖНО: Скрипт НЕ УДАЛЯЕТ существующие данные!"
echo 
echo -n "Продолжить? (y/n): "
read answer

if [ "$answer" != "y" ]; then
    echo "Операция отменена."
    exit 1
fi

echo "Начинаем восстановление структуры базы данных..."

# Запускаем безопасный скрипт восстановления
python scripts/recover_tables.py

echo "Операция завершена."